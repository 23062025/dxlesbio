<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DXLES — Bio</title>

  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Nunito:ital,wght@0,400;0,700;1,300&display=swap" rel="stylesheet">

  <style>
    /* -------------------------
       BASE / RESET
       ------------------------- */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;width:100%;background:#050505;color:#fff;font-family:"Nunito",system-ui,Segoe UI,Roboto,Arial;overflow:hidden}
    a{color:inherit;text-decoration:none}
    button{font-family:inherit}

    /* -------------------------
       CANVASES / LAYERS
       ------------------------- */
    canvas#globeCanvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;display:block}
    canvas#effectsCanvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:5;pointer-events:none}
    #overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;justify-content:center;align-items:center;z-index:10;transition:opacity .5s}
    #intro{z-index:11;flex-direction:column;text-align:center;pointer-events:none}
    #intro h1{font-family:"Orbitron",sans-serif;font-weight:700;font-size:2rem;color:#ff0044;text-shadow:0 0 10px #ff0044}
    #intro p{color:#888;font-size:1rem;margin-top:10px}
    #midload{z-index:12;flex-direction:column;text-align:center;pointer-events:none}
    #midload h2{font-family:"Orbitron",sans-serif;font-weight:400;font-size:1.5rem;color:#fff}
    #login{z-index:13;flex-direction:column;align-items:center;width:calc(100% - 40px);max-width:320px;padding:30px;background:rgba(20,20,20,0.85);border:1px solid rgba(255,255,255,0.1);border-radius:10px;text-align:center}
    #login h2{font-family:"Orbitron",sans-serif;margin-bottom:20px;color:#fff}
    #login input{width:100%;padding:12px;margin:8px 0;background:#222;border:1px solid #444;border-radius:5px;color:#fff;font-size:1rem;outline:none;transition:border-color .2s}
    #login input:focus{border-color:#ff0044}
    #login button{width:100%;padding:12px;margin-top:15px;background:#ff0044;color:#fff;border:none;border-radius:5px;font-size:1rem;font-weight:bold;cursor:pointer;transition:background-color .2s, transform .1s}
    #login button:hover{background-color:#cc0033;transform:translateY(-1px)}
    #login .small-links a{color:#bbb;font-size:0.8rem;margin:10px;display:inline-block;transition:color .2s}
    #login .small-links a:hover{color:#fff}

    /* -------------------------
       APP CONTAINER
       ------------------------- */
    #app{display:none;width:100%;height:100%;position:relative;z-index:2;overflow:hidden}

    /* -------------------------
       NAVBAR / HEADER
       ------------------------- */
    #navbar{position:fixed;top:0;left:0;width:100%;display:flex;justify-content:space-between;align-items:center;padding:15px 25px;background:rgba(0,0,0,0.4);backdrop-filter:blur(10px);z-index:100}
    #navbar .logo{font-family:"Orbitron",sans-serif;font-weight:700;font-size:1.5rem;color:#ff0044}
    #navbar .nav-links a{margin-left:25px;font-size:1rem;color:#fff;opacity:.8;transition:opacity .2s,color .2s}
    #navbar .nav-links a:hover{opacity:1;color:#ff0044}
    #navbar .user-info{display:flex;align-items:center;gap:10px}
    #navbar .user-info span{font-size:0.9rem;color:#ccc;white-space:nowrap}
    #navbar .user-info button{background:none;border:1px solid #ff0044;color:#ff0044;padding:6px 12px;border-radius:5px;font-size:0.8rem;cursor:pointer;transition:background .2s,color .2s}
    #navbar .user-info button:hover{background:#ff0044;color:#fff}

    /* -------------------------
       MAIN CONTENT / SECTIONS
       ------------------------- */
    .pageSection{display:none;padding:100px 20px 20px;max-width:900px;margin:0 auto;position:relative;z-index:2;height:100vh;overflow-y:auto}
    .pageSection h1{font-family:"Orbitron",sans-serif;font-weight:700;font-size:2.5rem;text-align:center;margin-bottom:40px;color:#fff}
    
    /* Home Section */
    .hero-text{text-align:center;margin-top:10vh}
    .hero-text h2{font-family:"Orbitron",sans-serif;font-weight:400;font-size:2.5rem;color:#fff;text-shadow:0 0 10px rgba(255,255,255,0.2);margin-bottom:20px}
    .hero-text .typing-container{min-height:100px;background:rgba(20,20,20,0.8);border:1px solid rgba(255,255,255,0.1);padding:20px;border-radius:10px;line-height:1.6;font-size:1.1rem;white-space:pre-wrap;text-align:left;position:relative}
    .hero-text .typing-cursor{font-weight:100;animation:blink-caret .75s step-end infinite;color:#ff0044}
    @keyframes blink-caret{from,to{color:transparent}50%{color:#ff0044}}

    /* About Section */
    .about-text{text-align:center;margin-bottom:40px;line-height:1.6;font-size:1.1rem}
    .about-qa-item{background:rgba(20,20,20,0.8);border:1px solid rgba(255,255,255,0.1);border-radius:8px;margin-bottom:15px;cursor:pointer;transition:background-color .2s}
    .about-qa-item:hover{background-color:rgba(30,30,30,0.8)}
    .about-qa-item .question{padding:15px 20px;font-weight:bold;color:#fff;position:relative}
    .about-qa-item .question:after{content:'+';position:absolute;right:20px;top:50%;transform:translateY(-50%);transition:transform .2s}
    .about-qa-item.open .question:after{content:'-';transform:rotate(45deg)}
    .about-qa-item .answer{padding:0 20px;max-height:0;overflow:hidden;transition:max-height .3s ease-out,padding .3s ease-out}
    .about-qa-item.open .answer{padding:15px 20px;max-height:500px}
    .about-qa-item .answer p{color:#bbb;line-height:1.5}

    /* Education Section */
    .education-item{background:rgba(20,20,20,0.8);border:1px solid rgba(255,255,255,0.1);border-radius:8px;margin-bottom:15px;padding:15px 20px;position:relative}
    .education-item h3{margin-bottom:5px;color:#ff0044}
    .education-item p{color:#ccc;font-size:0.9rem}

    /* Projects Section */
    .project-grid{display:grid;grid-template-columns:1fr;gap:20px}
    @media (min-width: 600px){
      .project-grid{grid-template-columns:1fr 1fr}
    }
    .project-card{background:rgba(20,20,20,0.8);border:1px solid rgba(255,255,255,0.1);border-radius:8px;padding:20px;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;transition:transform .2s, box-shadow .2s}
    .project-card:hover{transform:translateY(-5px);box-shadow:0 10px 20px rgba(0,0,0,0.3)}
    .project-card img{width:80px;height:80px;margin-bottom:15px;border-radius:10px}
    .project-card h3{color:#ff0044;margin-bottom:5px}
    .project-card p{color:#bbb;font-size:0.9rem}

    /* Blog Section */
    .blog-post{background:rgba(20,20,20,0.8);border:1px solid rgba(255,255,255,0.1);border-radius:8px;padding:20px;margin-bottom:20px}
    .blog-post h3{color:#fff;margin-bottom:5px}
    .blog-post .meta{color:#888;font-size:0.8rem;margin-bottom:10px}
    .blog-post p{color:#bbb;line-height:1.5}

    /* Comments Section */
    .comments-section{background:rgba(20,20,20,0.8);border:1px solid rgba(255,255,255,0.1);border-radius:8px;padding:20px;margin-top:20px}
    .comments-section h3{margin-bottom:15px;color:#fff}
    .comment-form textarea, .comment-form input{width:100%;padding:10px;margin-bottom:10px;background:#222;border:1px solid #444;border-radius:5px;color:#fff;font-size:0.9rem;resize:vertical}
    .comment-form button{background:#ff0044;color:#fff;border:none;padding:10px 15px;border-radius:5px;cursor:pointer}
    .comment-list{margin-top:20px;border-top:1px solid rgba(255,255,255,0.1);padding-top:20px}
    .comment-list-item{border-bottom:1px solid rgba(255,255,255,0.05);padding-bottom:15px;margin-bottom:15px}
    .comment-list-item .author{font-weight:bold;color:#ff0044;margin-bottom:5px}
    .comment-list-item .text{color:#ccc;line-height:1.5}
    
    /* Media Queries */
    @media (max-width: 600px){
      #navbar .logo{font-size:1.2rem}
      #navbar .nav-links a{margin-left:15px;font-size:0.9rem}
      .pageSection{padding-top:80px}
      .pageSection h1{font-size:2rem}
      .hero-text h2{font-size:2rem}
      .hero-text .typing-container{font-size:1rem}
    }
  </style>

</head>
<body>

  <canvas id="globeCanvas"></canvas>
  <canvas id="effectsCanvas"></canvas>
  
  <div id="overlay">
    
    <div id="intro" style="display: none;">
      <h1>DXLES</h1>
      <p>Boot sequence initializing — neon grid engaging</p>
    </div>
    
    <div id="midload" style="display: none;">
      <h2>LOADING DXLES — initializing environment</h2>
    </div>
    
    <div id="login" style="display: none;">
      <h2>SISTEME GİRİŞ</h2>
      <input type="text" id="usernameInput" placeholder="Kullanıcı Adı" />
      <input type="password" id="passwordInput" placeholder="Şifre" />
      <button id="doLogin">GİRİŞ YAP</button>
      <div class="small-links">
        <a href="#" id="signupBtn">Kaydol</a>
        <a href="#" id="forgotPasswordLink">Şifremi Unuttum</a>
      </div>
    </div>
    
  </div>

  <div id="app">
    
    <header id="navbar">
      <div class="logo">DXLES</div>
      <div class="nav-links">
        <a href="#" onclick="showPage('homePage')">ANA SAYFA</a>
        <a href="#" onclick="showPage('aboutPage')">HAKKIMDA</a>
        <a href="#" onclick="showPage('educationPage')">EĞİTİM</a>
        <a href="#" onclick="showPage('projectsPage')">PROJELER</a>
        <a href="#" onclick="showPage('blogPage')">BLOG</a>
        <a href="#" onclick="showPage('contactPage')">İLETİŞİM</a>
      </div>
      <div class="user-info">
        <img id="avatarImg" src="https://via.placeholder.com/180x180.png?text=DXLES" style="width: 32px; height: 32px; border-radius: 50%;">
        <span id="displayUser">Ziyaretçi</span>
        <button id="logout">Çıkış</button>
      </div>
    </header>

    <section id="homePage" class="pageSection active-page">
      <div class="hero-text">
        <h2>DXLES</h2>
        <div class="typing-container">
          <span id="typingAnswer">...</span>
          <span class="typing-cursor">|</span>
        </div>
      </div>
    </section>

    <section id="aboutPage" class="pageSection">
      <h1>HAKKIMDA</h1>
      <div class="about-text">
        <p>
          "DXLES" adı, "Digital" ve "Nexus" kelimelerinin birleşiminden geliyor.
          Dijital dünyada bir bağlantı noktası, bir merkez olmayı hedefliyor.
        </p>
      </div>

      <div class="about-qa-item">
        <div class="question">Neden DXLES?</div>
        <div class="answer">
          <p>
            Dxles, hem dijital evrenin derinliklerini keşfetmek hem de bu alanda
            yeni bağlantılar kurmak için kullandığım bir takma ad. Her projemde
            bu felsefeyi yansıtmaya çalışıyorum.
          </p>
        </div>
      </div>
      <div class="about-qa-item">
        <div class="question">Öne çıkan yeteneklerin neler?</div>
        <div class="answer">
          <p>
            Hem front-end hem de back-end geliştirme konusunda deneyimim var.
            Yapay zeka alanındaki çalışmalarım ise en tutkulu olduğum konu.
            Yeni teknolojilere adapte olmak ve hızlı öğrenmek en güçlü yanım.
          </p>
        </div>
      </div>
    </section>
    
    <section id="educationPage" class="pageSection">
      <h1>EĞİTİM</h1>
      <div class="education-qa-item">
        <div class="question">Lisans Eğitimi</div>
        <div class="answer">
          <p>İstanbul Üniversitesi, Bilgisayar Mühendisliği</p>
        </div>
      </div>
      <div class="education-qa-item">
        <div class="question">Yapay Zeka ve Makine Öğrenmesi</div>
        <div class="answer">
          <p>
            Çeşitli online kurslar ve atölye çalışmaları ile derinlemesine
            öğrenim. TensorFlow, PyTorch ve Scikit-learn kütüphanelerine hakimiyet.
          </p>
        </div>
      </div>
    </section>

    <section id="projectsPage" class="pageSection">
      <h1>PROJELER</h1>
      <div class="project-grid">
        <a href="#" class="project-card">
          <img src="https://via.placeholder.com/180x180.png?text=Proje+1" alt="Proje 1" />
          <h3>Siber Güvenlik Botu</h3>
          <p>
            Yapay zeka kullanarak siber saldırıları tespit eden ve önleyen bir bot.
            Python ile geliştirildi.
          </p>
        </a>
        <a href="#" class="project-card">
          <img src="https://via.placeholder.com/180x180.png?text=Proje+2" alt="Proje 2" />
          <h3>DX-Chatbot</h3>
          <p>
            Doğal dil işleme (NLP) yeteneği olan ve özelleştirilebilir bir
            chatbot platformu.
          </p>
        </a>
      </div>
    </section>

    <section id="blogPage" class="pageSection">
      <h1>BLOG</h1>
      <div class="blog-post">
        <h3>Web Geliştirmede Gelecek</h3>
        <p class="meta">10 Ağustos 2025</p>
        <p>
          Web 3.0, yapay zeka ve blok zinciri teknolojileri, web geliştirmeyi
          nasıl dönüştürecek?
        </p>
      </div>
      <div class="blog-post">
        <h3>Makine Öğrenmesi İçin 5 Python Kütüphanesi</h3>
        <p class="meta">12 Haziran 2025</p>
        <p>
          Veri bilimine yeni başlayanlar için en faydalı kütüphaneler.
        </p>
      </div>
    </section>

    <section id="contactPage" class="pageSection">
      <h1>İLETİŞİM</h1>
      <div class="comments-section">
        <h3>Yorum Bırak</h3>
        <div class="comment-form">
          <input type="text" id="commentName" placeholder="Adınız" />
          <textarea id="commentText" placeholder="Yorumunuz"></textarea>
          <button id="postComment">Yorumu Gönder</button>
        </div>
        <div id="commentList" class="comment-list">
          <div class="comment-list-item">
            <div class="author">Ziyaretçi</div>
            <div class="text">Selam, siten harika olmuş!</div>
          </div>
        </div>
      </div>
    </section>

  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/three@0.130.1/build/three.min.js"></script>
<script>
    /* ============================
       GLOBALS
       ============================ */
    const intro = document.getElementById('intro');
    const login = document.getElementById('login');
    const midload = document.getElementById('midload');
    const app = document.getElementById('app');
    const doLoginBtn = document.getElementById('doLogin');
    const signupBtn = document.getElementById('signupBtn');
    const forgotPasswordLink = document.getElementById('forgotPasswordLink');
    const userInput = document.getElementById('usernameInput');
    const passwordInput = document.getElementById('passwordInput');
    const displayUser = document.getElementById('displayUser');
    const logoutBtn = document.getElementById('logout');
    const typingAnswer = document.getElementById('typingAnswer');
    const avatarImg = document.getElementById('avatarImg');
    const pages = document.querySelectorAll('.pageSection');
    const commentName = document.getElementById('commentName');
    const commentText = document.getElementById('commentText');
    const commentList = document.getElementById('commentList');
    const postCommentBtn = document.getElementById('postComment');
    const qaItems = document.querySelectorAll('.about-qa-item');
    const educationItems = document.querySelectorAll('.education-qa-item');

    /* ============================
       ÇOK ÖNEMLİ! GÜVENLİK UYARISI
       ============================ */
    const USERS_KEY = 'dxles-demo-users';

    function loadUsers() {
      let users = JSON.parse(localStorage.getItem(USERS_KEY));
      if (!users) {
        users = {
          "dxl3s": { password: "dxlesxmary", securityQuestion: "En sevdiğin renk?" },
          "kuzen": { password: "1234", securityQuestion: "İlk evcil hayvanının adı?" }
        };
        localStorage.setItem(USERS_KEY, JSON.stringify(users));
      }
      return users;
    }

    let users = loadUsers();

    function saveUsers() {
      localStorage.setItem(USERS_KEY, JSON.stringify(users));
    }

    /* ============================
       SEQUENCE:
       1) show login OR AI override
       2) on login -> show midload (2.5s) while globe visible
       3) then show app
       ============================ */
    const params = new URLSearchParams(window.location.search);
    const isAIOverride = params.get('ai') === 'true';

    // helper to show mid loader
    function startMidLoadAndEnter(username, pageId = 'homePage') {
      if (login) login.style.display = 'none';
      if (midload) midload.style.display = 'flex';
      if (displayUser) displayUser.textContent = username;

      if (username && username.trim().length > 0) {
        const initials = username.trim().split(' ').map(s => s[0]).slice(0, 2).join('').toUpperCase();
        if (avatarImg) avatarImg.src = generateInitialsDataURL(initials);
      }

      setTimeout(() => {
        if (midload) midload.style.display = 'none';
        if (app) app.style.display = 'block';
        document.body.style.overflow = 'auto';
        showPage(pageId);
        startTypingEffect();
      }, 2500);
    }

    // login click
    if (doLoginBtn) {
      doLoginBtn.addEventListener('click', () => {
        const username = userInput.value.trim();
        const password = passwordInput.value.trim();
        if (users[username] && users[username].password === password) {
          startMidLoadAndEnter(username || 'Ziyaretçi');
        } else {
          alert("Yanlış kullanıcı adı veya şifre!");
        }
      });
    }

    // signup click
    if (signupBtn) {
      signupBtn.addEventListener('click', () => {
        const username = userInput.value.trim();
        const password = passwordInput.value.trim();

        if (username.length < 3 || password.length < 3) {
          alert("Kullanıcı adı ve şifre en az 3 karakter olmalı.");
          return;
        }

        if (users[username]) {
          alert("Bu kullanıcı adı zaten mevcut.");
          return;
        }

        const securityQuestion = prompt("Güvenlik sorusunu yazın (ör: İlk evcil hayvanının adı?):");
        if (!securityQuestion || securityQuestion.length < 5) {
          alert("Güvenlik sorusu en az 5 karakter olmalı. Hesap oluşturulamadı.");
          return;
        }

        users[username] = { password, securityQuestion };
        saveUsers();
        alert("Hesap başarıyla oluşturuldu! Şimdi giriş yapabilirsiniz.");
        userInput.value = '';
        passwordInput.value = '';
      });
    }

    // forgot password click
    if (forgotPasswordLink) {
      forgotPasswordLink.addEventListener('click', (e) => {
        e.preventDefault();
        const username = prompt("Şifresini sıfırlamak istediğin kullanıcı adını gir:");
        if (!username) return;

        const user = users[username];
        if (!user) {
          alert("Kullanıcı bulunamadı.");
          return;
        }

        const answer = prompt(user.securityQuestion);
        if (answer) {
          const newPassword = prompt("Yeni şifreni gir:");
          if (newPassword && newPassword.length >= 3) {
            users[username].password = newPassword;
            saveUsers();
            alert("Şifren başarıyla güncellendi! Giriş yapabilirsin.");
          } else {
            alert("Yeni şifre en az 3 karakter olmalı. İşlem iptal edildi.");
          }
        } else {
          alert("Güvenlik sorusunu doğru cevaplamadın. İşlem iptal edildi.");
        }
      });
    }

    // logout: reset to login overlay
    if (logoutBtn) {
      logoutBtn.addEventListener('click', () => {
        if (app) app.style.display = 'none';
        if (login) login.style.display = 'flex';
        if (userInput) userInput.value = '';
        if (passwordInput) passwordInput.value = '';
        if (displayUser) displayUser.textContent = 'Ziyaretçi';
        if (typingAnswer) typingAnswer.textContent = '...';
        document.body.style.overflow = 'hidden';
        if (avatarImg) avatarImg.src = 'https://via.placeholder.com/180x180.png?text=DXLES';
      });
    }

    // Page navigation function
    function showPage(pageId) {
      if (pages) {
        pages.forEach(page => {
          page.style.display = 'none';
        });
        const selectedPage = document.getElementById(pageId);
        if (selectedPage) {
          selectedPage.style.display = 'block';
        }
      }
    }

    // Home page link
    document.querySelector('a[onclick*="homePage"]').addEventListener('click', (e) => {
        e.preventDefault();
        showPage('homePage');
    });

    /* ============================
       TYPING ANIMATION (GPT-like answer)
       ============================ */
    const answerText = "Ben Dxles. Türkiye merkezli yazılım geliştiricisiyim — frontend, backend ve yapay zekâ ile uğraşıyorum. Deneyler, projeler ve bazı karanlık meraklarım var. Bu sayfa benim kısa bio'um; buraya benim hakkımda sorular ve placeholder yorumlar eklenir.";
    function startTypingEffect() {
      if (!typingAnswer) return;
      typingAnswer.textContent = '';
      let i = 0;
      const speed = 18;
      const interval = setInterval(() => {
        if (i < answerText.length) {
          typingAnswer.textContent += answerText.charAt(i);
          i++;
        } else {
          clearInterval(interval);
        }
      }, speed);
    }

    /* ============================
       ACCORDION (Q&A) Logic
       ============================ */
    if (qaItems) {
      qaItems.forEach(item => {
        item.addEventListener('click', () => {
          const isOpen = item.classList.contains('open');
          qaItems.forEach(i => i.classList.remove('open'));
          if (!isOpen) {
            item.classList.add('open');
          }
        });
      });
    }

    /* ============================
       ACCORDION (EDUCATION) Logic
       ============================ */
    if (educationItems) {
      educationItems.forEach(item => {
        item.addEventListener('click', () => {
          const isOpen = item.classList.contains('open');
          educationItems.forEach(i => i.classList.remove('open'));
          if (!isOpen) {
            item.classList.add('open');
          }
        });
      });
    }

    /* ============================
       YORUMLAR (Comments) Logic
       ============================ */
    if (postCommentBtn) {
      postCommentBtn.addEventListener('click', () => {
        const name = (commentName.value.trim() || 'Anonim').slice(0, 30);
        const text = (commentText.value.trim() || '...').slice(0, 800);

        if (name && text) {
          const el = document.createElement('div');
          el.className = 'comment-list-item';
          el.innerHTML = `<div class="author">${escapeHtml(name)}</div><div class="text">${escapeHtml(text)}</div>`;
          if (commentList) commentList.prepend(el);
          if (commentName) commentName.value = '';
          if (commentText) commentText.value = '';
        }
      });
    }

    function escapeHtml(s) {
      return s.replace(/[&<>"]/g, c => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;' }[c]));
    }

    /* ============================
       UTILS: generate initials avatar
       ============================ */
    function generateInitialsDataURL(initials) {
      const size = 480;
      const c = document.createElement('canvas');
      c.width = c.height = size;
      const ctx = c.getContext('2d');
      const g = ctx.createLinearGradient(0, 0, size, size);
      g.addColorStop(0, '#0f0f0f');
      g.addColorStop(1, '#070707');
      ctx.fillStyle = g;
      ctx.fillRect(0, 0, size, size);
      ctx.beginPath();
      ctx.arc(size / 2, size / 2, size / 2 - 12, 0, Math.PI * 2);
      ctx.lineWidth = 24;
      ctx.strokeStyle = 'rgba(255,0,68,0.12)';
      ctx.stroke();
      ctx.fillStyle = '#ff0044';
      ctx.font = 'bold 180px "Orbitron", sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(initials, size / 2, size / 2 - 8);
      ctx.globalAlpha = 0.06;
      ctx.fillStyle = '#fff';
      for (let i = 0; i < 1500; i++) {
        ctx.fillRect(Math.random() * size, Math.random() * size, 1, 1);
      }
      return c.toDataURL('image/png');
    }

    /* ============================
       3D GLOBE using THREE.js
       ============================ */
    const threeCanvas = document.getElementById('globeCanvas');
    let renderer, scene, camera, globeGroup, solidMesh, wireMesh, latLines, points;
    let attacks = [];
    const rotationSpeed = 0.002;

    function initThree() {
      if (!threeCanvas || typeof THREE === 'undefined') return;
      renderer = new THREE.WebGLRenderer({ canvas: threeCanvas, antialias: true, alpha: true });
      renderer.setPixelRatio(window.devicePixelRatio || 1);
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setClearColor(0x000000, 0);

      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.set(0, 0, 22);
      scene.add(new THREE.AmbientLight(0xffffff, 0.15));
      globeGroup = new THREE.Group();
      scene.add(globeGroup);

      const textureLoader = new THREE.TextureLoader();
      const mapTexture = textureLoader.load('rW71261.png');

      const geomSolid = new THREE.SphereGeometry(8, 64, 64);
      const matSolid = new THREE.MeshPhongMaterial({
        color: 0x080808,
        shininess: 2,
        specular: 0x111111,
        emissive: 0x001122,
        emissiveIntensity: 0.02,
        transparent: true,
        opacity: 0.95,
        map: mapTexture
      });
      solidMesh = new THREE.Mesh(geomSolid, matSolid);
      globeGroup.add(solidMesh);

      const geomWire = new THREE.SphereGeometry(8.02, 128, 128);
      const wireMat = new THREE.MeshBasicMaterial({ color: 0xff0044, wireframe: true, transparent: true, opacity: 0.75 });
      wireMesh = new THREE.Mesh(geomWire, wireMat);
      globeGroup.add(wireMesh);

      latLines = new THREE.Group();
      const latMaterial = new THREE.LineBasicMaterial({ color: 0x00ffff, transparent: true, opacity: 0.25 });
      for (let lat = -70; lat <= 70; lat += 10) {
        const r = 8 * Math.cos(THREE.Math.degToRad(lat));
        const y = 8 * Math.sin(THREE.Math.degToRad(lat));
        const segments = 256;
        const latGeom = new THREE.BufferGeometry();
        const positions = new Float32Array((segments + 1) * 3);
        for (let i = 0; i <= segments; i++) {
          const theta = (i / segments) * Math.PI * 2;
          positions[i * 3 + 0] = r * Math.cos(theta);
          positions[i * 3 + 1] = y;
          positions[i * 3 + 2] = r * Math.sin(theta);
        }
        latGeom.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        const line = new THREE.Line(latGeom, latMaterial.clone());
        line.material.opacity = 0.1 + Math.random() * 0.12;
        latLines.add(line);
      }
      globeGroup.add(latLines);

      const ptsCount = 1200;
      const ptsGeom = new THREE.BufferGeometry();
      const ptsPositions = new Float32Array(ptsCount * 3);
      for (let i = 0; i < ptsCount; i++) {
        const phi = Math.acos(2 * Math.random() - 1);
        const theta = 2 * Math.PI * Math.random();
        const r = 8.1 + Math.random() * 0.3;
        ptsPositions[i * 3 + 0] = r * Math.sin(phi) * Math.cos(theta);
        ptsPositions[i * 3 + 1] = r * Math.cos(phi);
        ptsPositions[i * 3 + 2] = r * Math.sin(phi) * Math.sin(theta);
      }
      ptsGeom.setAttribute('position', new THREE.BufferAttribute(ptsPositions, 3));
      const ptsMat = new THREE.PointsMaterial({ size: 0.06, color: 0xff0044, transparent: true, opacity: 0.8 });
      points = new THREE.Points(ptsGeom, ptsMat);
      globeGroup.add(points);

      window.addEventListener('resize', onWindowResize);
    }

    function onWindowResize() {
      if (renderer && camera) {
        renderer.setSize(window.innerWidth, window.innerHeight);
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
      }
    }

    let mouseMoveCounter = 0;
    function generateRandomPointOnSphere(radius) {
      const phi = Math.acos(2 * Math.random() - 1);
      const theta = 2 * Math.PI * Math.random();
      return new THREE.Vector3(
        radius * Math.sin(phi) * Math.cos(theta),
        radius * Math.cos(phi),
        radius * Math.sin(phi) * Math.sin(theta)
      );
    }

    function createAttack() {
      if (!globeGroup) return;
      const source = generateRandomPointOnSphere(8.1);
      const target = generateRandomPointOnSphere(8.1);
      const midPoint = new THREE.Vector3().lerpVectors(source, target, 0.5);
      const dist = source.distanceTo(target);
      const normal = midPoint.clone().normalize();
      const controlPoint = midPoint.add(normal.multiplyScalar(dist * (0.5 + Math.random())));
      const curve = new THREE.QuadraticBezierCurve3(source, controlPoint, target);
      const curvePoints = curve.getPoints(50);
      const attackColor = new THREE.Color();
      if (Math.random() > 0.5) {
        attackColor.setHex(0x00ffff);
      } else {
        attackColor.setHex(0xffa500); // Orange
      }
      const attackGeom = new THREE.BufferGeometry().setFromPoints(curvePoints);
      const attackLine = new THREE.Line(
        attackGeom,
        new THREE.LineBasicMaterial({
          color: attackColor,
          transparent: true,
          opacity: 0.8,
          blending: THREE.AdditiveBlending
        })
      );
      globeGroup.add(attackLine);
      attacks.push({
        line: attackLine,
        curve: curve,
        progress: 0,
        speed: 0.008 + Math.random() * 0.005,
        life: 0,
        maxLife: 120
      });
    }

    function burstAttack() {
      for (let i = 0; i < 4 + Math.random() * 2; i++) {
        createAttack();
      }
    }

    let attackInterval;
    function startAttacks() {
      if (!attackInterval) {
        attackInterval = setInterval(burstAttack, 2500 + Math.random() * 2500);
      }
    }

    window.addEventListener('mousemove', (ev) => {
      mouseMoveCounter++;
      if (mouseMoveCounter % 3 === 0) {
        createAttack();
        mouseMoveCounter = 0;
      }
    });

    function animateThree() {
      requestAnimationFrame(animateThree);
      if (globeGroup) {
        globeGroup.rotation.y += rotationSpeed;
      }

      for (let i = attacks.length - 1; i >= 0; i--) {
        const attack = attacks[i];
        attack.progress += attack.speed;
        if (attack.progress >= 1) {
          attack.progress = 1;
        }
        const animatedPoints = attack.curve.getPoints(50).slice(0, Math.floor(attack.progress * 50));
        if (attack.line && attack.line.geometry) {
          attack.line.geometry.setFromPoints(animatedPoints);
        }
        attack.life++;
        if (attack.line && attack.line.material) {
          attack.line.material.opacity = Math.max(0, 1 - (attack.life / attack.maxLife));
        }
        if (attack.life > attack.maxLife) {
          if (globeGroup && attack.line) {
            globeGroup.remove(attack.line);
          }
          attacks.splice(i, 1);
        }
      }

      if (renderer && scene && camera) {
        renderer.render(scene, camera);
      }
    }

    function init() {
      if (intro) intro.style.display = 'none';
      if (isAIOverride) {
        startMidLoadAndEnter('AI User', 'aboutPage');
      } else {
        if (login) login.style.display = 'flex';
        if (userInput) userInput.focus();
      }

      initThree();
      animateThree();
      startAttacks();
      setCanvasDPR();
    }

    function setCanvasDPR() {
      if (renderer) {
        const dpr = Math.min(2, window.devicePixelRatio || 1);
        renderer.setPixelRatio(dpr);
      }
    }

    document.addEventListener('DOMContentLoaded', init);
    document.body.style.overflow = 'hidden';
</script>

</body>
</html>
